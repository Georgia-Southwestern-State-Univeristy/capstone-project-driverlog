# Frontend App
This app is the main use component for a user attempting to log routing data
This app currently allows the user to start and stop a route, as well as display the summary generated by the completion of the most recent route

Installation: download the .apk file from the release page (do not download the source code, it is not needed). Install the .apk file on an android device. Run the app.

# Frontend Website
This website provides the web-based interface for the DriverLog system. It will allow employers to send out assignments, view reports, and monitor flagged entries (currently only has sample data).
Built with React, Vite, and TailwindCSS.

Installation: 
Make sure Node.js is installed. 
Steps:
1. Open a terminal and clone the repository
2. Navigate to the 'frontend_website' folder
3. Run 'npm install' in the frontend_website folder
4. Run 'npm run dev'
5. Open the local URL provided in a web browser

# BACKEND Info
Using Azure Functions for API endpoints and Cosmos DB for database to store route information.

Cosmos DB (NoSQL) currently has three containers defined.
* routes
    * This container holds route information.
        * id
        * routeId
        * userId
        * status (Active or Completed)
        * startTime
* routePoints
    * Each route point (GPS Coordinate) taken by the client device is uploaded here associated with a route.
        * id
        * routeId
        * ts (epoch time when point was taken)
        * lat
        * lon
        * speed (meters per second)
* routeSummaries
    * After routes have been completed, summary information about the route is created by the endRoute function and uploaded to this container.
        * id
        * routeId
        * userId
        * pointCount (number of points collected during route)
        * durationSeconds
        * totalDistanceMeters
        * totalDistanceMile
        * averageSpeedMph
        * completedAt (Date/Time when route completed)

Azure functions which expose 3 API endpoints used to interact with the backend.

* startRoute.js
    * This function starts the route by generating unique UUID for the route and passing back to client as response.
    * Creates the new route in the routes container of the database
* uploadPoints.js
    * Client calls this endpoint and sends json file over containing the ts, lat, lon, speed of each point.
    * Updates the routePoints container in database which each point.
    * Each points ID in DB is the routeID + ts (epoch time point taken)
* endRoute.js
    * This function ends the route and generates the summary data from data collected during the route.
    * Summary data generated from this function about the route is uploaded to the routeSummaries container in the database
<details>

<summary>Click here to see how to Connect to Backend</summary>

## How to connect to Azure function endpoints to start, add points, and end a GPS route.
Header must include ----> Key = Content-Type ; Value = application/json


Starting route----
URL : https://driverlogbackend-cwe7gpeuamfhffgt.eastus-01.azurewebsites.net/api/routes/start
BODY of JSON is empty : {}

Adding Points----
https://driverlogbackend-cwe7gpeuamfhffgt.eastus-01.azurewebsites.net/api/routes/r-50f935f3-a637-4562-af78-56fd5323fc57/points
---Notes r-xxxx is the routeId retrieved from the response of starting the route.---
---Time (ts) is epoch time created on client mobile device----
BODY of JSON (example below) NOTE: USE EPOCH TIME (https://www.epoch101.com/) :
{
  "points": [
    { "ts": 1769913660, "lat": 47.6401, "lon": -122.1301, "speed": 4.1 },
    { "ts": 1769913665, "lat": 47.6408, "lon": -122.1290, "speed": 4.3 },
    { "ts": 1769913670, "lat": 47.6414, "lon": -122.1279, "speed": 4.6 }
  ]
}

Ending route----
URL: https://driverlogbackend-cwe7gpeuamfhffgt.eastus-01.azurewebsites.net/api/routes/r-50f935f3-a637-4562-af78-56fd5323fc57/end
BODY : {}

</details>